<?xml version='1.0' encoding='utf-8'?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="panda_arm">

<!-- robot constants -->
<xacro:property name="mass" value="1" /> <!-- arbitrary value for mass -->

<xacro:macro name="panda_arm" params="arm_id:='' description_pkg:='franka_arm_gripper_realsense_gazebo_description' connected_to:='' xyz:='0 0 0' rpy:='0 0 0'">


<link name="world"/>

<!-- Base Link (Link 0) -->
<link name="arm_link0">
	<visual>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/visual/link0.dae"/>
		</geometry>
	</visual>
	
	<collision>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/collision/link0.stl"/>
		</geometry>
	</collision>
	
	<inertial>
		<origin xyz="0 0 ${1/2}" rpy="0 0 0"/>
		<mass value="2.0"/>
		<inertia ixx="0.0" ixy="0.0" ixz="0.0" iyy="0.0" iyz="0.0" izz="0.0"/>
	</inertial>
</link>

	<joint name="fix_to_world" type="fixed">
		<parent link="world"/>
		<child link="arm_link0"/>
		<origin xyz="${xyz}" rpy="${rpy}"/>
	</joint>


<!-- Link 1 -->
<link name="arm_link1">
	<visual>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/visual/link1.dae"/>
		</geometry>
	</visual>
	
	<collision>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/collision/link1.stl"/>
		</geometry>
	</collision>
	
	<inertial>
		<origin xyz="0 0 -0.015" rpy="0 0 0"/>
		<mass value="2.7"/>
		<inertia ixx="0.006" ixy="0.0" ixz="0.0" iyy="0.006" iyz="0.0" izz="0.0015"/>
	</inertial>
</link>

<!-- Joint 1 -->
<joint name="arm_joint1" type="revolute">
	<safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-2.8973" soft_upper_limit="2.8973"/>
	<origin rpy="0 0 0" xyz="0 0 0.333"/>
	<parent link="arm_link0"/>
	<child link="arm_link1"/>
	<axis xyz="0 0 1"/>
	<dynamics damping="5.0" friction="1.5"/>
	<!-- <limit effort="87" lower="-2.9671" upper="2.9671" velocity="2.3925"/>  -->
	<limit effort="120" lower="-2.9671" upper="2.9671" velocity="2.3925"/>
</joint>

<!-- Link 2 -->
<link name="arm_link2">
	<visual>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/visual/link2.dae"/>
		</geometry>
	</visual>
	
	<collision>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/collision/link2.stl"/>
		</geometry>
	</collision>
	
	<inertial>
		<origin xyz="0 0 0.015" rpy="0 0 0"/>
		<mass value="2.7"/>
		<inertia ixx="0.006" ixy="0.0" ixz="0.0" iyy="0.006" iyz="0.0" izz="0.0015"/>
	</inertial>
</link>

<!-- Joint 2 -->
<joint name="arm_joint2" type="revolute">
	<safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-1.7628" soft_upper_limit="1.7628"/>
	<origin rpy="${-pi/2} 0 0" xyz="0 0 0"/>
	<parent link="arm_link1"/>
	<child link="arm_link2"/>
	<axis xyz="0 0 1"/>
	<dynamics damping="10.0" friction="1.5"/>
	<!-- <limit effort="87" lower="-1.8326" upper="1.8326" velocity="2.3925"/>  -->
	<limit effort="120" lower="-1.8326" upper="1.8326" velocity="2.3925"/>
</joint>

<!-- Link 3 -->
<link name="arm_link3">
	<visual>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/visual/link3.dae"/>
		</geometry>
	</visual>
	
	<collision>
		<geometry>
		<mesh filename="package://${description_pkg}/model/panda_arm/meshes/collision/link3.stl"/>
		</geometry>
	</collision>
	
	<inertial>
		<origin xyz="0 0 -0.015" rpy="0 0 0"/>
		<mass value="2.7"/>
		<inertia ixx="0.006" ixy="0.0" ixz="0.0" iyy="0.006" iyz="0.0015" izz="0.05"/>
	</inertial>
</link>

<!-- Joint 3 -->
<joint name="arm_joint3" type="revolute">
	<safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-2.8973" soft_upper_limit="2.8973"/>
	<origin rpy="${pi/2} 0 0" xyz="0 -0.316 0"/>
	<parent link="arm_link2"/>
	<child link="arm_link3"/>
	<axis xyz="0 0 1"/>
	<dynamics damping="5.0" friction="0.5"/>
	<!-- <limit effort="87" lower="-2.9671" upper="2.9671" velocity="2.3925"/>  -->
	<limit effort="120" lower="-2.9671" upper="2.9671" velocity="2.3925"/>
</joint>




<transmission name="arm_trans1">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="arm_joint1">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
  </joint>
  <actuator name="arm_motor1">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<transmission name="arm_trans2">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="arm_joint2">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
  </joint>
  <actuator name="arm_motor2">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<transmission name="arm_trans3">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="arm_joint3">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
  </joint>
  <actuator name="arm_motor3">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>


</xacro:macro>
</robot>

